
##
##思路
1. 根据要求可将任务分为前端和后台，首先利用PHP执行各种shell命令获取数据，再用前端美化界面。需要每3秒刷新数据，不能通过后台渲染数据，需要通过AJAX请求进行获取数据，并且要求根据任务名称获取任务进程数，需要一个处理表单的文件，共需要三个主文件。
2. 一共用了四条shell命令： 
 - top命令获取CPU与内存使用率，CLI模式下可以正常使用，但在CGI模式下，top命令报错，利用输出重定向2>&1将错误内容输出，通过百度，将命令修改为`/usr/bin/top -bn 1` ，添加参数-b,进行批处理，-n 1 为显示一次结果，否则top会持续执行。
 - df 命令获取硬盘信息，硬盘容量单位为K，在图表中显示过于杂乱，将KB转为GB。
 - `mysql -u root -e status` 命令用于查看mysql状态，其中Thread参数为mysql线程数，即可当做连接数。
 - `ps -ef | grep ". $name ." | grep -v 'grep' |wc -l| awk '{print $1}'"`  可以直接获取任务进程数，
 - 再通过命令`ps -ef | grep ". $name ." | grep -v 'grep' ` 获取进程相关信息。

##遇到的问题
1. 通过正则匹配shell返回的结果时，与预期不同，匹配数字时始终有39，匹配字母时始终为m开头。通过命令行执行PHP，并将结果输出至文件中，发现文件中含有很多 类似 `^[B(` ,` 39;49m`的编码，导致正则匹配不正确，通过手动替换掉干扰性较大的字符之后便可以正常使用正则表达式。
2. 在使用array_filter 函数去除数组中空元素时，会将0去除。需要手写循环。
3. echarts 图表的使用，直接引用实例再进行修改很容易出错，找多个功能的简单样例进行拼接更容易。

##优化
- 代码可以运行之后，封装一个monitor类。